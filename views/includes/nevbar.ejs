
<nav class="navbar navbar-expand-md sticky-top bg-light shadow-sm">
  <div class="container-fluid">
    <!-- Brand -->
    <a class="navbar-brand" href="/">
      <i class="fa-solid fa-compass" style="color: #ff0505;"></i>
    </a>

    <!-- Toggler Button -->
    <button 
      class="navbar-toggler" 
      type="button" 
      data-bs-toggle="collapse" 
      data-bs-target="#navbarNavAltMarkup" 
      aria-controls="navbarNavAltMarkup" 
      aria-expanded="false" 
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar Links -->
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-link" href="/listings">Explore</a>
        <a class="nav-link" href="/listings/new">Add New Listing</a>
        <a class="nav-link" href="/about">About</a>
      </div>
      
      <!-- Search Box -->
      <div class="search ms-4">
        <form class="d-flex" role="search">
          <input 
            class="form-control custom-search-input me-2" 
            type="search" 
            placeholder="Search" 
            aria-label="Search"
          >
          <button class="btn btn-success custom-search-btn" type="submit">Search</button>
        </form>
      </div>

    <!-- Right-aligned links -->
    <div class="navbar-nav ms-auto">
      <!-- Dark Mode Toggle -->
      <button class="btn btn-link nav-link" id="darkModeToggle">
        <i class="fas fa-moon"></i> Dark
      </button>
      
      <a class="nav-link" href="/contact">Contact</a>
      <% if (user) { %>
        <a class="nav-link" href="/logout"><b>Logout</b></a>
      <% } else { %>
        <a class="nav-link" href="/signup"><b>Signup</b></a>
        <a class="nav-link" href="/login"><b>Login</b></a>
      <% } %>
    </div>
  </div>
</nav>

<style>
  /* Dark Mode Styles */
  :root {
    --bg-color: #ffffff;
    --text-color: #212529;
    --nav-bg: #f8f9fa;
  }

  .dark-mode {
    --bg-color: #1a1a1a;
    --text-color: #f8f9fa;
    --nav-bg: #2d2d2d;
    
    background-color: var(--bg-color);
    color: var(--text-color);
  }

  .dark-mode .navbar {
    background-color: var(--nav-bg) !important;
  }

  .dark-mode .form-control {
    background-color: #333;
    color: #fff;
    border-color: #555;
  }

  .dark-mode .btn-success {
    background-color: #28a745;
    border-color: #28a745;
  }

  #darkModeToggle {
    transition: all 0.3s ease;
  }

  .dark-mode #darkModeToggle i {
    color: #ffd700;
  }
</style>

<script>
  const darkModeToggle = document.getElementById('darkModeToggle');
  const body = document.body;

  // Check local storage for dark mode preference
  const isDarkMode = localStorage.getItem('darkMode') === 'enabled';
  if (isDarkMode) {
    body.classList.add('dark-mode');
    darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> Light';
  }

  darkModeToggle.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    
    if (body.classList.contains('dark-mode')) {
      localStorage.setItem('darkMode', 'enabled');
      darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> Light';
    } else {
      localStorage.setItem('darkMode', 'disabled');
      darkModeToggle.innerHTML = '<i class="fas fa-moon"></i> Dark';
    }
  });
</script>